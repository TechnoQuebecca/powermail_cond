!function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function o(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,r(t,e,"get"))}function a(t,e,i){return function(t,e,i){if(e.set)e.set.call(t,i);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=i}}(t,r(t,e,"set"),i),i}function r(t,e,i){if(!e.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return e.get(t)}function l(t,e,i){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return i}function s(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function u(t,e){s(t,e),e.add(t)}var c=function(){function e(){t(this,e)}return i(e,null,[{key:"hideElement",value:function(t){null!==t&&(t.style.display="none")}},{key:"showElement",value:function(t){null!==t&&(t.style.display="block")}}]),e}(),d=new WeakMap,h=new WeakSet,f=new WeakSet,w=new WeakSet,p=new WeakSet,m=new WeakSet,b=new WeakSet,v=new WeakSet,y=new WeakSet,S=new WeakSet,k=new WeakSet,g=new WeakSet,q=new WeakSet,A=new WeakSet,W=new WeakSet,E=new WeakSet,_=new WeakSet,T=i((function e(i){var r,c,T;t(this,e),u(this,_),u(this,E),u(this,W),u(this,A),u(this,q),u(this,g),u(this,k),u(this,S),u(this,y),u(this,v),u(this,b),u(this,m),u(this,p),u(this,w),u(this,f),u(this,h),n(this,"use strict",void 0),T={writable:!0,value:void 0},s(r=this,c=d),c.set(r,T),n(this,"initialize",(function(){var t=this;l(t,f,C).call(t),l(t,h,j).call(t)})),a(this,d,i),o(this,d).powermailConditions=this}));function j(){var t=this;l(this,m,P).call(this).forEach((function(e){e.addEventListener("change",(function(e){l(t,f,C).call(t)}))}))}function C(){var t=this;l(t,p,O).call(t),fetch(l(this,b,x).call(this),{body:new FormData(o(this,d)),method:"post"}).then((function(t){return t.json()})).then((function(e){e.loops>99?console.log("Too much loops reached by parsing conditions and rules. Check for conflicting conditions."):l(t,w,z).call(t,e)})).catch((function(t){console.log(t)}))}function z(t){if(void 0!==t.todo)for(var e in t.todo)for(var i in t.todo[e])for(var n in"hide"===t.todo[e][i]["#action"]&&l(this,k,L).call(this,l(this,_,K).call(this,i)),"un_hide"===t.todo[e][i]["#action"]&&l(this,S,F).call(this,l(this,_,K).call(this,i)),t.todo[e][i])"hide"===t.todo[e][i][n]["#action"]&&l(this,y,D).call(this,n),"un_hide"===t.todo[e][i][n]["#action"]&&l(this,v,M).call(this,n)}function O(){o(this,d).querySelectorAll('[disabled="disabled"]').forEach((function(t){t.removeAttribute("disabled")}))}function P(){return o(this,d).querySelectorAll('input:not([data-powermail-validation="disabled"]):not([type="hidden"]):not([type="submit"]), textarea:not([data-powermail-validation="disabled"]), select:not([data-powermail-validation="disabled"])')}function x(){var t=document.querySelector("[data-condition-uri]");return null===t&&console.log("Tag with data-condition-uri not found. Maybe TypoScript was not included."),t.getAttribute("data-condition-uri")}function M(t){var e=l(this,E,J).call(this,t),i=e.closest(".powermail_fieldwrap");c.showElement(i),e.removeAttribute("disabled"),l(this,q,G).call(this,e)}function D(t){var e=l(this,E,J).call(this,t),i=e.closest(".powermail_fieldwrap");c.hideElement(i),e.setAttribute("disabled","disabled"),l(this,g,B).call(this,e)}function F(t){c.showElement(t)}function L(t){c.hideElement(t)}function B(t){(t.hasAttribute("required")||t.hasAttribute("data-powermail-required"))&&(t.removeAttribute("required"),t.removeAttribute("data-powermail-required"),t.setAttribute("data-powermailcond-required","required"))}function G(t){"required"===t.getAttribute("data-powermailcond-required")&&(l(this,W,I).call(this)||l(this,A,H).call(this))&&t.setAttribute("required","required"),t.removeAttribute("data-powermailcond-required")}function H(){return"data-powermail-validate"===o(this,d).getAttribute("data-powermail-validate")}function I(){return"html5"===o(this,d).getAttribute("data-validate")}function J(t){return o(this,d).querySelector('[name="tx_powermail_pi1[field]['+t+']"]:not([type="hidden"])')}function K(t){return o(this,d).querySelector(".powermail_fieldset_"+t)}document.querySelectorAll(".powermail_form").forEach((function(t){new T(t).initialize()}))}();
